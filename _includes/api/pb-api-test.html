

<script type="text/javascript">
	
	$( document ).ready(function() {
		
		
		//get the category
		var queryItems = getUrlVars()
		var apiDocCategory = queryItems[0][1];
		
		console.log(apiDocCategory);
		//display the category
		displayFile(apiDocCategory + ".html", "apiCatgories", "api-endpoints");
				
		
		//get the api file the user requested
		var apiDefinition;
		if (queryItems.length > 1) {
			
			apiDefinition = queryItems[1][1];
				
			//need to check and see if the anchor point is attached and strip if it is. (Happens when you refresh screen)
			if (apiDefinition.includes("#")) { 
				var arrApiDefinition = apiDefinition.split("#");
				apiDefinition = arrApiDefinition[0];
			}
			console.log(apiDefinition);
			//displayFile(apiDefinition + ".html", "apiDocs", "api-definition-display");
			displayFile("/html/" + apiDefinition + ".html", "apiDocs", "api-definition-display");
			
			//move to anchor point
			location.hash = "#apiDocs";

		}
		
	});
	
	
	function showBidResponse() { 
		var element = document.getElementById("bidResponseDetails");
		var button = document.getElementById("btnBidResponse");
		
		
		//check to see if it is on or off
		if (element.classList.contains("api-off")) {
			
			//swap classes 
			element.classList.remove("api-off");
			element.classList.add("api-on");
			
			//change button text
			button.innerHTML = "Hide Attribute Details";
			
		} else { 
			
			//swap classes 
			element.classList.add("api-off");
			element.classList.remove("api-on");
			
			//change button text
			button.innerHTML = "Show Attribute Details";
		}
		
	}
	
	
	function displayFile(srcFile, srcDir, divName) { 
		
		//set up the file path
		let src = "/sandbox/" + srcDir + "/" + srcFile;
		
		//display the file
		var element = document.getElementById(divName);
		//clear out existing html
		element.innerHTML = "";
		
		//load code from file
		$(element).load(src);
		
		//display the api documentation
		element.classList.remove("api-off");
		element.classList.add("api-on");
		
		//reload the highlighting (need to do this when you dynamically load content)
		$('#pb-api-code-display').each(function(i, e) {
			console.log(e);
			hljs.highlightBlock(e)
		});
		
	}
	
	function getUrlVars() {
	    var qsParams = [];
	    var arrParams = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
	    for(var i = 0; i < arrParams.length; i++) {
	        qsParams.push(arrParams[i].split("="));
	    }
    	return qsParams;
	}
			
</script>


<div class="container pb-api-categories pb-api-list">

		{% assign arrCategories = site.data.pb-api %}
		
		<ul style="">
		{% for thisCat in arrCategories %}
		
			<li><a href="{{page.url}}?apiDocTarget={{thisCat.catName}}" class="hvr-overline-from-center">{{thisCat.catName}}</a></li>
		
		{% endfor %}
		</ul>
	
</div>


<div class="container">
	
	<div>
		<div class="api-doc api-on pb-api-list" id="api-endpoints"><h4>Select a category to see API endpoints related to that category.</h4></div>
	</div>
	
	<hr>
	<a name="apiDocs"></a>
	<div class="api-off api-definition" id="api-definition-display"></div>
	
</div>
	
 