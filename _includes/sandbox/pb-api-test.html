
<script src="//cdnjs.cloudflare.com/ajax/libs/showdown/1.9.0/showdown.js"></script>
<script type="text/javascript">
	
	
	converter = new showdown.Converter({tables: true});
	
	$( document ).ready(function() {
		
		//get the category
		var queryItems = getUrlVars()
		var apiDocCategory = queryItems[0][1];
				
		//display the category
		displayFile(apiDocCategory + ".html", "apiCatgories", "api-endpoints");
				
		
		//get the api file the user requested
		var apiDefinition;
		if (queryItems.length > 1) {
			
			apiDefinition = queryItems[1][1];
				
			//need to check and see if the anchor point is attached and strip if it is. (Happens when you refresh screen)
			if (apiDefinition.includes("#")) { 
				var arrApiDefinition = apiDefinition.split("#");
				apiDefinition = arrApiDefinition[0];
			}
			
			//displayFile(apiDefinition + ".html", "apiDocs", "api-definition-display");
			displayFile("/html/" + apiDefinition + ".html", "apiDocs", "api-definition-display");
			
			//move to anchor point
			location.hash = "#apiDocs";

		}
					
		
	});
	
	/*
	function convertMDToHTML(converter, srcFile, srcDir, divName) { 
				
		//set up the file path
		let src = "/sandbox/" + srcDir + "/" + srcFile;
		
		//set up destination
		var element = document.getElementById(divName);
		
		//clear out existing html
		element.innerHTML = "";
		
		//read text from file
		$.ajax({
			url:src,
			success: function (data){
				
				//convert markdown to html and display
				element.innerHTML = converter.makeHtml(data);
				
    		}
  		});
		
		//set the classes
		element.classList.remove("api-off");
		element.classList.add("api-on");
		
	}
	*/
	
	function displayFile(srcFile, srcDir, divName) { 
		
		//set up the file path
		let src = "/sandbox/" + srcDir + "/" + srcFile;
		
		//display the file
		var element = document.getElementById(divName);
		//clear out existing html
		element.innerHTML = "";
		
		//load code from file
		$(element).load(src);
		
		//set the classes
		element.classList.remove("api-off");
		element.classList.add("api-on");
		
	}
	
	function getUrlVars() {
	    var qsParams = [];
	    var arrParams = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
	    for(var i = 0; i < arrParams.length; i++) {
	        qsParams.push(arrParams[i].split("="));
	    }
    	return qsParams;
	}
	
		

	
	

	
		
</script>

<!--category list-->
<div class="container api-files">&nbsp;&nbsp;

		{% assign arrCategories = site.data.pb-api | where: "isFirst", 1 %}
		
		<ul style="list-style-type: none; margin: 0; padding: 0; overflow: hidden;">
		{% for thisCat in arrCategories %}
		
			<li class="pb-category-box effect2"><a href="{{page.url}}?apiDocTarget={{thisCat.catName}}">{{thisCat.catName}}</a></li>
		
		{% endfor %}
		</ul>
	
</div>


<!--content display-->
<div class="container">
	
	<div>
		<div class="api-doc api-on" id="api-endpoints"><h4>Select a category to see API endpoints related to that category.</h4></div>
	</div>
	
	<hr>
	<a name="apiDocs"></a>
	<div class="api-off api-definition" id="api-definition-display" markdown="1">&nbsp;</div>
	
</div>
	
 