<!DOCTYPE html>
<html>

    <head>
	    
		<meta charset="utf-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
	    <meta name="google-site-verification" content="_SMhyxJ4MnU9eTUQQNMUwU5W18T5tjNF7A6mumIci-A" />
	    <meta name="keywords" content="Header Bidding, Advanced Bidding, Header Bid, Pre-bid">
	    <meta name="description" content="{{page.description}}" />
	
	    <link rel="shortcut icon" type="image/png" href="/favicon.png" />
	    <title>Prebid Video Example : Self Hosted JW Player</title>
	    
	
		<!-- OneTrust Cookies Consent Notice start -->
	
		<script src="https://cdn.cookielaw.org/consent/53783db5-1614-43d4-bb1a-148e68e8c87b.js" type="text/javascript" charset="UTF-8"></script>
		<script type="text/javascript">
		function OptanonWrapper() { }
		</script>
		<!-- OneTrust Cookies Consent Notice end -->
	
	
	    <!--<link href="http://www.prebid.org/assets/css/bootstrap.min.css" rel="stylesheet">-->
	    <!-- Latest compiled and minified Bootstrap CSS -->
		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
	    <link href="http://www.prebid.org/assets/css/docs.min.css" rel="stylesheet">
	    <link rel="stylesheet" href="/assets/css/prism.css">
		<link href="http://www.prebid.org/assets/css/style.css" rel="stylesheet">
	
	
		<!-- Favicons -->
		<link href="http://www.prebid.org/assets/images/favicon.png" rel="icon">
		<link href="http://www.prebid.org/assets/images/apple-touch-icon.png" rel="apple-touch-icon">
	
		<!-- Google Fonts -->
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,700,700i|Montserrat:300,400,500,700" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Roboto:100,300,300i,400,400i,700,700i>
		<link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Open+Sans+Condensed" />
		<link href="https://fonts.googleapis.com/css?family=Dosis" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Roboto+Condensed" rel="stylesheet">
	
	  <script src="http://www.prebid.org/assets/js/prism.js"></script>
	  <script src="http://www.prebid.org/assets/js/jquery.min.js"></script>
	  <script src="http://www.prebid.org/assets/js/bootstrap.js"></script>
	  <script src="http://www.prebid.org/assets/js/bootbox.min.js"></script>
	  <script src="http://www.prebid.org/assets/js/docs.min.js"></script>
	  <script src="http://www.prebid.org/assets/js/easing.min.js"></script>
	  <script src="http://www.prebid.org/assets/js/main.js"></script>
	  <script type="text/javascript" src="http://www.prebid.org/assets/js/pbjs_home.js"></script>
        
	  <script async src="//acdn.adnxs.com/prebid/not-for-prod/1/prebid.js"></script>
      <script>
            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            var PREBID_TIMEOUT = 700;

            var firstPlay = true;

            var tempTag = false;
            var invokeVideoPlayer = function(url) {
                tempTag = url;
            }

            var videoAdUnit = {
                code: 'video1',
                mediaTypes: {
                    video: {
                        playerSize: [640, 480],
                        context: 'instream'
                    }
                },
                bids: [{
                    bidder: 'appnexus',
                    params: {
                        placementId: 13232361, // Add your own placement id here
                        video: {
                            skipppable: true,
                            playback_method: ['auto_play_sound_off']
                        }
                    }
                }]
            };

            var requestVideoAd = function() {

                pbjs.requestBids({
                    bidsBackHandler: function(bids) {
                        var videoUrl = pbjs.adServers.dfp.buildVideoUrl({
                            adUnit: videoAdUnit,
                            params: {
                                iu: '/19968336/prebid_cache_video_adunit',
                                cust_params: {
                                    section: 'blog',
                                    anotherKey: 'anotherValue'
                                },
                                output: 'vast'
                            }
                        });
                        invokeVideoPlayer(videoUrl);
                    }
                });
            }

            pbjs.que.push(function() {
                pbjs.addAdUnits(videoAdUnit); // add your ad units to the bid request

                pbjs.setConfig({
                    debug: true,
                    cache: {
                        url: 'https://prebid.adnxs.com/pbc/v1/cache'
                    }
                });

                requestVideoAd();
            });

        </script>    
	</head>
	
	<body>
    
    	<div style="margin:0; padding:0;">

		<div style="width:100%; height:50px">
			<a class="navbar-brand" href="#"><a href="http://www.prebid.org"><img src="http://www.prebid.org/assets/images/logos/prebid_final.png" width="200" height="33"></a>
			</div>
		</div>

		<div style="margin:0; padding:0;">
			<div class="col-sm-2 sidebar-expanded d-none d-md-block sidebar" id="sidebar">
		
				 <ul class="list-group">
				 	<li>Video Link</li>
				 	<li>Video Link</li>
				 	<li>Video Link</li>
				 	<li>Video Link</li>
				 	<li>Video Link</li>
				 	<li>Video Link</li>				 	
				 </ul>						
				
			</div>	
		
				
		<div class="col-sm-9 pb-content" markdown="1">
			
			<div id="videoTitle"><h1>Prebid Video Example</h1><p><h3>JW Player Playlist</h3</div>
			<div id="videoDescription"><p>An example of a playlist of videos with Prebid using JW Player.</p></div>
			<div markdown="span" class="pb-alert pb-alert-important" role="alert">
				<i class="fa fa-exclamation-circle"></i>
				<p style="color:#85720f"><b>Important:</b>
				This example uses a test version of Prebid.js hosted on our CDN that is not recommended for production use. It includes all available adapters. Production implementations should build from source or customize the build using the Download page to make sure only the necessary bidder adapters are included.</p>
			</div>
			
			<!--player div-->
			<div id="myElement1"></div>
			
			<!--code sample-->
			<div id="videoCode" style="margin-top:10px">
				<div><h3>Code Sample</h3><p>Place this code within the <code>&lt;head&gt;</code> tag:</p>
<pre>
  	&lt;script async src="//acdn.adnxs.com/prebid/not-for-prod/1/prebid.js"&gt;&lt;/script&gt;
      &lt;script&gt;
            var pbjs = pbjs || {};
            pbjs.que = pbjs.que || [];

            var PREBID_TIMEOUT = 700;

            var firstPlay = true;

            var tempTag = false;
            var invokeVideoPlayer = function(url) {
                tempTag = url;
            }

            var videoAdUnit = {
                code: 'video1',
                mediaTypes: {
                    video: {
                        playerSize: [640, 480],
                        context: 'instream'
                    }
                },
                bids: [{
                    bidder: 'appnexus',
                    params: {
                        placementId: 13232361, // Add your own placement id here
                        video: {
                            skipppable: true,
                            playback_method: ['auto_play_sound_off']
                        }
                    }
                }]
            };

            var requestVideoAd = function() {

                pbjs.requestBids({
                    bidsBackHandler: function(bids) {
                        var videoUrl = pbjs.adServers.dfp.buildVideoUrl({
                            adUnit: videoAdUnit,
                            params: {
                                iu: '/19968336/prebid_cache_video_adunit',
                                cust_params: {
                                    section: 'blog',
                                    anotherKey: 'anotherValue'
                                },
                                output: 'vast'
                            }
                        });
                        invokeVideoPlayer(videoUrl);
                    }
                });
            }

            pbjs.que.push(function() {
                pbjs.addAdUnits(videoAdUnit); // add your ad units to the bid request

                pbjs.setConfig({
                    debug: true,
                    cache: {
                        url: 'https://prebid.adnxs.com/pbc/v1/cache'
                    }
                });

                requestVideoAd();
            });

        &lt;/script&gt;    
&gt;
</pre>
					<p style="padding-bottom:10px">Place this code within the <code>&lt;body&gt;</code> tag of your HTML page. </p>
<pre>
	&lt;!--player div--&gt;
	&lt;div id="myElement1"&gt;&lt;/div&gt;
	&lt;!-- replace this script with the libraries script of your player --&gt;
        &lt;script src="https://content.jwplatform.com/libraries/72xIKEe6.js"&gt;&lt;/script&gt;
        &lt;script&gt;
            var adTag = "";
            var playerInstance = jwplayer('myElement1');

            invokeVideoPlayer = function(url) {
                adTag = url;
                console.log("MESSAGE: invoking the video player");

                // if this is our first time invoking the player, we also need to create the player
                // and the event listeners
                if (firstPlay) {
                    playerInstance.setup({
                        "playlist": "https://content.jwplatform.com/feeds/ae4tmw2D.json",
                        "width": 640,
                        "height": 480,
                        "advertising": {
                            "client": "vast",
                        },
                    });

                    // set firstPlay to false to make sure we don't call setup() on our player a second time
                    firstPlay = false;

                    // beforePlay gets triggered before each content video plays
                    // we play the ad tag being stored in the variable adTag, which we refresh
                    // each time a content video plays by calling requestVideoAd
                    playerInstance.on("beforePlay", function() {
                        playerInstance.playAd(adTag);
                        console.log("MESSAGE: refreshing the ad slot");
                        pbjs.que.push(function() {
                            requestVideoAd();
                        });
                    });

                    // if our playlist ends and does not repeat, we want to play the last ad we got
                    playerInstance.on("beforeComplete", function() {
                        if (playerInstance.getPlaylistIndex() === playerInstance.getPlaylist().length - 1) {
                            playerInstance.playAd(adTag);
                        }
                    });
                }
            }

            // if prebid returned an ad before the browser reached the end of the page,
            // the version of invokeVideoPlayer we defined in the header has stored the url in tempTag,
            // so we call invokeVideoPlayer with the stored url we stored
            if (tempTag) {
                invokeVideoPlayer(tempTag);
                tempTag = false;
            }

        &lt;/script&gt;
</pre>
				</div>
			</div>
		</div>
		
		 <div class="container">
			 <div class="pb_footer">
		    	All demos, instructions, documentation and code included on the Prebid.org website are released<br /> under the <a href="https://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License</a>. | <a href="http://www.prebid.org/credits.html">Credits</a>
		    	<p></p>
		    </div>
		</div>
	
	  <!-- / copyrights -->
	
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-130832561-1"></script>
		<script>
		  window.dataLayer = window.dataLayer || [];
		  function gtag(){dataLayer.push(arguments);}
		  gtag('js', new Date());
		
		  gtag('config', 'UA-130832561-1', {'anonymize_ip': true});
		</script>
		
		<script>
			$(document).ready(function() {
				$( 'a[href^="http://"]' ).attr( 'target','_blank' );
			});
		</script>
		
		<!-- replace this script with the libraries script of your player -->
        <script src="https://content.jwplatform.com/libraries/72xIKEe6.js"></script>
        <script>
            var adTag = "";
            var playerInstance = jwplayer('myElement1');

            invokeVideoPlayer = function(url) {
                adTag = url;
                console.log("MESSAGE: invoking the video player");

                // if this is our first time invoking the player, we also need to create the player
                // and the event listeners
                if (firstPlay) {
                    playerInstance.setup({
                        "playlist": "https://content.jwplatform.com/feeds/ae4tmw2D.json",
                        "width": 640,
                        "height": 480,
                        "advertising": {
                            "client": "vast",
                        },
                    });

                    // set firstPlay to false to make sure we don't call setup() on our player a second time
                    firstPlay = false;

                    // beforePlay gets triggered before each content video plays
                    // we play the ad tag being stored in the variable adTag, which we refresh
                    // each time a content video plays by calling requestVideoAd
                    playerInstance.on("beforePlay", function() {
                        playerInstance.playAd(adTag);
                        console.log("MESSAGE: refreshing the ad slot");
                        pbjs.que.push(function() {
                            requestVideoAd();
                        });
                    });

                    // if our playlist ends and does not repeat, we want to play the last ad we got
                    playerInstance.on("beforeComplete", function() {
                        if (playerInstance.getPlaylistIndex() === playerInstance.getPlaylist().length - 1) {
                            playerInstance.playAd(adTag);
                        }
                    });
                }
            }

            // if prebid returned an ad before the browser reached the end of the page,
            // the version of invokeVideoPlayer we defined in the header has stored the url in tempTag,
            // so we call invokeVideoPlayer with the stored url we stored
            if (tempTag) {
                invokeVideoPlayer(tempTag);
                tempTag = false;
            }

        </script>
		<script src="http://www.prebid.org/assets/js/prism.js"></script>   
    </body>

</html>

